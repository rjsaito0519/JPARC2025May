#include "ana_helper.h"

namespace ana_helper {

    // ____________________________________________________________________________________________
    std::vector<Int_t> get_bac_info(Int_t run_number) {
        // vector = {MPPC HV, board a, board b, board c, board d}
        static const std::map<Int_t, std::vector<Int_t>> run_map = {
            {404, {58, 1, 1, 1, 1}},
            {405, {58, 1, 1, 1, 1}},
            {406, {58, 1, 1, 1, 1}},
            {407, {58, 1, 1, 1, 1}},
            {409, {58, 2, 2, 2, 2}},
            {410, {58, 2, 2, 2, 2}},
            {411, {58, 2, 2, 2, 2}},
            {412, {58, 2, 2, 2, 2}},
            {414, {58, 3, 3, 3, 3}},
            {415, {58, 3, 3, 3, 3}},
            {416, {58, 3, 3, 3, 3}},
            {417, {58, 3, 3, 3, 3}},
            {419, {58, 4, 4, 4, 4}},
            {420, {58, 4, 4, 4, 4}},
            {421, {58, 4, 4, 4, 4}},
            {422, {58, 4, 4, 4, 4}},
            {424, {58, 5, 5, 5, 5}},
            {425, {58, 5, 5, 5, 5}},
            {426, {58, 5, 5, 5, 5}},
            {427, {58, 5, 5, 5, 5}},
            {429, {58, 6, 6, 6, 6}},
            {430, {58, 6, 6, 6, 6}},
            {431, {58, 6, 6, 6, 6}},
            {432, {58, 6, 6, 6, 6}},
            {434, {58, 7, 7, 7, 7}},
            {435, {58, 7, 7, 7, 7}},
            {436, {58, 7, 7, 7, 7}},
            {437, {58, 7, 7, 7, 7}},
            {439, {58, 8, 8, 8, 8}},
            {440, {58, 8, 8, 8, 8}},
            {441, {58, 8, 8, 8, 8}},
            {442, {58, 8, 8, 8, 8}},
            {444, {58, 9, 9, 9, 9}},
            {445, {58, 9, 9, 9, 9}},
            {446, {58, 9, 9, 9, 9}},
            {447, {58, 9, 9, 9, 9}},
            {449, {58,10,10,10,10}},
            {450, {58,10,10,10,10}},
            {451, {58,10,10,10,10}},
            {452, {58,10,10,10,10}},
            {454, {58,11,11,11,11}},
            {455, {58,11,11,11,11}},
            {456, {58,11,11,11,11}},
            {457, {58,11,11,11,11}},
            {459, {58,12,12,12,12}},
            {460, {58,12,12,12,12}},
            {461, {58,12,12,12,12}},
            {462, {58,12,12,12,12}},
            {464, {58,13,13,13,13}},
            {465, {58,13,13,13,13}},
            {466, {58,13,13,13,13}},
            {467, {58,13,13,13,13}},
            {469, {58,14,14,14,14}},
            {470, {58,14,14,14,14}},
            {471, {58,14,14,14,14}},
            {472, {58,14,14,14,14}},
            {474, {58,15,15,15,15}},
            {475, {58,15,15,15,15}},
            {476, {58,15,15,15,15}},
            {477, {58,15,15,15,15}},
            {479, {58,16,16,16,16}},
            {480, {58,16,16,16,16}},
            {481, {58,16,16,16,16}},
            {482, {58,16,16,16,16}},
            {484, {57, 1, 1, 1, 1}},
            {485, {57, 1, 1, 1, 1}},
            {486, {57, 1, 1, 1, 1}},
            {487, {57, 1, 1, 1, 1}},
            {489, {56, 1, 1, 1, 1}},
            {490, {56, 1, 1, 1, 1}},
            {491, {56, 1, 1, 1, 1}},
            {492, {56, 1, 1, 1, 1}},
            {494, {58, 1, 1, 1, 1}},
            {495, {58, 1, 1, 1, 1}},
            {496, {58, 1, 1, 1, 1}},
            {497, {58, 1, 1, 1, 1}},
        };

        auto it = run_map.find(run_number);
        if (it != run_map.end()) {
            return it->second;
        } else {
            throw std::runtime_error("Run number not found");
        }
    }

    // ____________________________________________________________________________________________
    std::vector<Int_t> get_kvc2_info(Int_t run_number) {
        static const std::map<Int_t, std::vector<Int_t>> run_map = {
            {378, {58, 9, 8, 8, 9}},
            {381, {58, 9, 8, 8, 9}},
            {382, {58,10, 7, 7,10}},
            {384, {58,10, 7, 7,10}},
            {385, {58,11, 6, 6,11}},
            {386, {58,11, 6, 6,11}},
            {389, {58,12, 5, 5,12}},
            {390, {58,12, 5, 5,12}},
            {507, {58, 5,12,12, 5}},
            {508, {58, 5,12,12, 5}},
            
            {735, {58, 14, 3, 3, 14}},
            {736, {58, 14, 3, 3, 14}},
            {737, {58, 14, 3, 3, 14}},
            {740, {58, 15, 2, 2, 15}},
            {741, {58, 15, 2, 2, 15}},
            {742, {58, 15, 2, 2, 15}},
            {743, {58, 15, 2, 2, 15}},
            {746, {58, 16, 1, 1, -1}},
            {747, {58, 16, 1, 1, -1}},
            {748, {58, 16, 1, 1, -1}},            
            {751, {58, -1, 16, -1, 1}},
            {754, {58, -1, 16, -1, 1}},
            {755, {58, -1, 16, -1, 1}},
            {757, {58, 2, 15, 15, 2}},
            {758, {58, 2, 15, 15, 2}},
            {759, {58, 2, 15, 15, 2}},
            {762, {57, 2, 15, 15, 2}},
            {765, {56, 2, 15, 15, 2}},
            {768, {58, 3, 14, 14, 3}},
            {769, {58, 3, 14, 14, 3}},
            {772, {58, 4, 13, 13, 4}},
            {773, {58, 4, 13, 13, 4}},
            {774, {58, 4, 13, 13, 4}},
            {778, {58, 9, 8, 8, 9}},
            {779, {58, 9, 8, 8, 9}},
            {780, {58, 9, 8, 8, 9}},
            {783, {57, 9, 8, 8, 9}},
            {784, {57, 9, 8, 8, 9}},
            {787, {56, 9, 8, 8, 9}},
            {788, {56, 9, 8, 8, 9}},
            {789, {56, 9, 8, 8, 9}},
            {793, {58, 10, 7, 7, 10}},
            {794, {58, 10, 7, 7, 10}},
            {797, {58, 11, 6, 6, 11}},
            {798, {58, 11, 6, 6, 11}},
            {801, {58, 12, 5, 5, 12}},
            {802, {58, 12, 5, 5, 12}},
            {803, {58, 12, 5, 5, 12}},
            {808, {58, 5, 12, 12, 5}},
            {809, {58, 5, 12, 12, 5}},
            {812, {57, 5, 12, 12, 5}},
            {813, {57, 5, 12, 12, 5}},
            {814, {57, 5, 12, 12, 5}},
            {817, {56, 5, 12, 12, 5}},
            {818, {56, 5, 12, 12, 5}},
            {819, {56, 5, 12, 12, 5}},
            {820, {56, 5, 12, 12, 5}},
            {823, {58, 6, 11, 11, 6}},
            {825, {58, 6, 11, 11, 6}},
            {826, {58, 6, 11, 11, 6}},
            {829, {58, 7, 10, 10, 7}},
            {830, {58, 7, 10, 10, 7}},
            {831, {58, 7, 10, 10, 7}},
            {832, {58, 7, 10, 10, 7}},
            {835, {58, 8, 9, 9, 8}},
            {836, {58, 8, 9, 9, 8}},
            {837, {58, 8, 9, 9, 8}},
            {840, {58, 13, 4, 4, 13}},
            {841, {58, 13, 4, 4, 13}},
            {842, {58, 13, 4, 4, 13}},
        };

        auto it = run_map.find(run_number);
        if (it != run_map.end()) {
            return it->second;
        } else {
            throw std::runtime_error("Run number not found");
        }
    }

    Int_t get_kvc2_segment(Int_t run_number) {
        static const std::map<Int_t, Int_t> segment_map = {
            // Segment 1
            {751, 0}, {754, 0}, {755, 0},
            {757, 0}, {758, 0}, {759, 0},
            {762, 0}, {765, 0},
            {768, 0}, {769, 0},
            {772, 0}, {773, 0}, {774, 0},

            // Segment 2
            {808, 1}, {809, 1},
            {812, 1}, {813, 1}, {814, 1},
            {817, 1}, {818, 1}, {819, 1}, {820, 1},
            {823, 1}, {825, 1}, {826, 1},
            {829, 1}, {830, 1}, {831, 1}, {832, 1},
            {835, 1}, {836, 1}, {837, 1},

            {507, 1}, {508, 1},

            // Segment 3
            {778, 2}, {779, 2}, {780, 2},
            {783, 2}, {784, 2},
            {787, 2}, {788, 2}, {789, 2},
            {793, 2}, {794, 2},
            {797, 2}, {798, 2},
            {801, 2}, {802, 2}, {803, 2},

            {378, 2}, {381, 2}, {382, 2},
            {384, 2}, {385, 2}, {386, 2},
            {389, 2}, {390, 2},

            // Segment 4
            {735, 3}, {736, 3}, {737, 3},
            {740, 3}, {741, 3}, {742, 3}, {743, 3},
            {746, 3}, {747, 3}, {748, 3},
            {840, 3}, {841, 3}, {842, 3}
        };

        auto it = segment_map.find(run_number);
        if (it != segment_map.end()) {
            return it->second;
        } else {
            throw std::runtime_error("Run number not found in segment map");
        }
    }

}